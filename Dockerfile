# Usa la imagen base de Rust
FROM rust:latest

# Instala pkg-config y libsodium
RUN apt-get update && \
    apt-get install -y pkg-config libsodium-dev && \
    apt-get install nmap -y && \
    rm -rf /var/lib/apt/lists/*

# Establece el directorio de trabajo
WORKDIR /usr/src/pentesting

# Copia los archivos de configuración del proyecto
COPY Cargo.toml ./

# Copia el código fuente
COPY . .

# Compila el proyecto
RUN cargo build --release

# Define el comando por defecto (asegúrate de que el nombre del ejecutable sea correcto)
CMD ["./target/release/pentesting"]  